-#  This file is app/views/listings/index.html.haml
%h2 Filtered Available Listings

= form_tag listings_path, :method => :get, id: "zipcode filter" do
  = label :condition, :zipcode, 'Zip Code'
  = text_field :condition, 'zipcode'
  = submit_tag 'Filter'

= link_to 'Add New Listing', new_listing_path

%table#listings.table.table-striped.col-md-12{id:'listing_table'}
  %thead
    %tr
      - Listing::index_display_cols.each do |col|
        - if col == flash[:sorted_col]
          %th.hilite= Listing::sym2name[col]
        - elsif Listing::valid_sort_cols.include?col
          %th= link_to Listing::sym2name[col], listings_path(:sorted_col => col)
        - else
          %th= Listing::sym2name[col]
      %th More Info
  %tbody
    - @all_listings.each do |listing|
      %tr
        - Listing::index_display_cols.each do |col|
          %td= listing[col]
        %td= link_to "More Details", listing_url(listing)
