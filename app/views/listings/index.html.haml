-#  This file is app/views/listings/index.html.haml
%h2 Filtered Available Listings

= form_tag listings_path, :method => :get, id: "zipcode filter" do
  = label :listing, :zipcode, 'Zip Code'
  = text_field :listing, 'zipcode'
  = submit_tag 'Filter'

%table#listings.table.table-striped.col-md-12{id:'listing_table'}
  %thead
    %tr
      - Listing::col_names.keys.each do |col|
        - if col == flash[:sorted_col]
          %th.hilite= Listing::col_names[col]
        - elsif Listing::valid_sort_cols.include?col
          %th= link_to Listing::col_names[col], listings_path(:sorted_col => col)
        - else
          %th= Listing::col_names[col]
      %th More Info
  %tbody
    - @all_listings.each do |listing|
      %tr
        %td= listing.storage_id
        %td= listing.address
        %td= listing.zipcode
        %td= listing.daily_price
        %td= listing.email
        %td= 'To be done'